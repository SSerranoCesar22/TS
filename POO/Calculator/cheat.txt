const scr = document.getElementById('screen') as HTMLElement;
const numberButtons = document.querySelectorAll(".number");
const opButtons = document.querySelectorAll(".symbol");
let currentInput: string = "";
let value1: string = "";
let value2: string = "";
let currentOperator: string = "";

function inputScreen() {
    numberButtons.forEach(button => {
        button.addEventListener("click", () => {
            const value = button.getAttribute("data-value");
            currentInput += value;
            updateScreen();
        });
    });
    
    opButtons.forEach(button => {
        button.addEventListener("click", () => {
            const op = button.getAttribute("data-value");
            if (op === "=") {
                performOperation();
            } else {
                currentOperator = op;
                value1 = currentInput;
                currentInput = "";
            }
        });
    });
}

function updateScreen() {
    const paragraph = scr.querySelector("p");
    if (paragraph) {
        paragraph.textContent = currentInput;
    }
}

function performOperation() {
    if (value1 && currentOperator && currentInput) {
        const num1 = parseFloat(value1);
        const num2 = parseFloat(currentInput);

        switch (currentOperator) {
            case "+":
                currentInput = (num1 + num2).toString();
                break;
            case "-":
                currentInput = (num1 - num2).toString();
                break;
            case "X":
                currentInput = (num1 * num2).toString();
                break;
            case "รท":
                if (num2 !== 0) {
                    currentInput = (num1 / num2).toString();
                } else {
                    currentInput = "Math Error";
                }
                break;
            default:
                currentInput = "Invalid Operator";
        }

        // Reiniciar valores
        value1 = "";
        currentOperator = "";
        updateScreen();
    }
}

inputScreen();
